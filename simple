--// üåà ESP GUI Auto Range by Tr·ª•oyfu x GPT-5

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

--==| GUI T·∫†O GIAO DI·ªÜN CH√çNH |==--
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ESP_GUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local MainButton = Instance.new("TextButton")
MainButton.Size = UDim2.new(0, 130, 0, 40)
MainButton.Position = UDim2.new(0.5, -65, 0.85, 0)
MainButton.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
MainButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MainButton.Font = Enum.Font.GothamBold
MainButton.TextSize = 16
MainButton.Text = "ESP: OFF"
MainButton.Parent = ScreenGui
MainButton.Active = true
MainButton.Draggable = true
MainButton.AutoButtonColor = true
MainButton.BorderSizePixel = 0
MainButton.BackgroundTransparency = 0.2

local DistanceBox = Instance.new("TextBox")
DistanceBox.Size = UDim2.new(0, 150, 0, 35)
DistanceBox.Position = UDim2.new(0.5, -75, 0.78, 0)
DistanceBox.PlaceholderText = "Kho·∫£ng c√°ch (1 - 1000)"
DistanceBox.Text = ""
DistanceBox.Font = Enum.Font.Gotham
DistanceBox.TextSize = 14
DistanceBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
DistanceBox.TextColor3 = Color3.fromRGB(255, 255, 255)
DistanceBox.Visible = false
DistanceBox.Parent = ScreenGui

--==| BI·∫æN TO√ÄN C·ª§C |==--
local espEnabled = false
local espMode = 0 -- 0 = off, 1 = limit, 2 = full
local espDistance = 100
local espCache = {}

--==| H√ÄM C·∫¶U V·ªíNG |==--
local function rainbowColor()
	local t = tick() * 2
	return Color3.fromHSV(t % 1, 1, 1)
end

--==| T·∫†O ESP |==--
local function createESP(target)
	if target == LocalPlayer or espCache[target] then return end
	local char = target.Character
	if not char then return end

	local hrp = char:FindFirstChild("HumanoidRootPart")
	local hum = char:FindFirstChildOfClass("Humanoid")
	if not hrp or not hum then return end

	local box = Instance.new("BoxHandleAdornment")
	box.Size = Vector3.new(4, 6, 4)
	box.Adornee = hrp
	box.AlwaysOnTop = true
	box.ZIndex = 5
	box.Color3 = rainbowColor()
	box.Transparency = 0.3
	box.Parent = hrp

	local billboard = Instance.new("BillboardGui")
	billboard.Adornee = hrp
	billboard.Size = UDim2.new(0, 200, 0, 50)
	billboard.StudsOffset = Vector3.new(0, 3, 0)
	billboard.AlwaysOnTop = true

	local nameLabel = Instance.new("TextLabel", billboard)
	nameLabel.Size = UDim2.new(1, 0, 0.5, 0)
	nameLabel.BackgroundTransparency = 1
	nameLabel.TextColor3 = Color3.new(1, 1, 1)
	nameLabel.Font = Enum.Font.GothamBold
	nameLabel.TextScaled = true
	nameLabel.Text = "@" .. target.Name

	local infoLabel = Instance.new("TextLabel", billboard)
	infoLabel.Size = UDim2.new(1, 0, 0.5, 0)
	infoLabel.Position = UDim2.new(0, 0, 0.5, 0)
	infoLabel.BackgroundTransparency = 1
	infoLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
	infoLabel.Font = Enum.Font.Gotham
	infoLabel.TextScaled = true
	infoLabel.Text = "..."

	billboard.Parent = hrp
	espCache[target] = {Box = box, Billboard = billboard, Hum = hum, HRP = hrp, Info = infoLabel}
end

--==| X√ìA ESP |==--
local function removeESP(target)
	if espCache[target] then
		local data = espCache[target]
		if data.Box then data.Box:Destroy() end
		if data.Billboard then data.Billboard:Destroy() end
		espCache[target] = nil
	end
end

--==| CLEAR T·∫§T C·∫¢ |==--
local function clearESP()
	for _, data in pairs(espCache) do
		if data.Box then data.Box:Destroy() end
		if data.Billboard then data.Billboard:Destroy() end
	end
	espCache = {}
end

--==| C·∫¨P NH·∫¨T T·ª∞ ƒê·ªòNG |==--
RunService.RenderStepped:Connect(function()
	if not espEnabled then return end
	local lpChar = LocalPlayer.Character
	if not lpChar or not lpChar:FindFirstChild("HumanoidRootPart") then return end
	local lhrp = lpChar.HumanoidRootPart

	for _, plr in pairs(Players:GetPlayers()) do
		if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
			local hrp = plr.Character.HumanoidRootPart
			local dist = (lhrp.Position - hrp.Position).Magnitude

			if espMode == 2 or dist <= espDistance then
				if not espCache[plr] then
					createESP(plr)
				end
			elseif espCache[plr] then
				removeESP(plr)
			end

			if espCache[plr] then
				local data = espCache[plr]
				local hum = data.Hum
				if hum and hum.Parent then
					data.Box.Color3 = rainbowColor()
					local tool = plr.Character:FindFirstChildOfClass("Tool")
					local toolName = tool and tool.Name or "None"
					data.Info.Text = string.format("üìè%.0f | ‚ù§Ô∏è%.0f | üó°Ô∏è%s", dist, hum.Health, toolName)
				else
					removeESP(plr)
				end
			end
		end
	end
end)

--==| N√öT NH·∫§N |==--
MainButton.MouseButton1Click:Connect(function()
	if espMode == 0 then
		espMode = 1
		DistanceBox.Visible = true
		MainButton.Text = "ESP: LIMIT"
		MainButton.BackgroundColor3 = Color3.fromRGB(255, 170, 0)
	elseif espMode == 1 then
		espMode = 2
		DistanceBox.Visible = false
		MainButton.Text = "ESP: FULL"
		MainButton.BackgroundColor3 = Color3.fromRGB(0, 255, 100)
	elseif espMode == 2 then
		espMode = 0
		clearESP()
		MainButton.Text = "ESP: OFF"
		MainButton.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
	end
	espEnabled = espMode ~= 0
end)

--==| NH·∫¨P KHO·∫¢NG C√ÅCH |==--
DistanceBox.FocusLost:Connect(function(enterPressed)
	if enterPressed then
		local val = tonumber(DistanceBox.Text)
		if val and val >= 1 and val <= 1000 then
			espDistance = val
		else
			espDistance = 100
		end
		DistanceBox.Visible = false
	end
end)

--==| RESET ESP B·∫∞NG CHAT |==--
LocalPlayer.Chatted:Connect(function(msg)
	if msg:lower() == "reset" then
		clearESP()
		espMode = 0
		MainButton.Text = "ESP: OFF"
		MainButton.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
		DistanceBox.Visible = false
	end
end)

--==| TH√îNG B√ÅO |==--
local Notify = Instance.new("TextLabel")
Notify.Size = UDim2.new(0, 250, 0, 40)
Notify.Position = UDim2.new(0.5, -125, 0.4, 0)
Notify.BackgroundColor3 = Color3.fromRGB(0, 255, 100)
Notify.BackgroundTransparency = 0.2
Notify.TextColor3 = Color3.new(0, 0, 0)
Notify.Font = Enum.Font.GothamBold
Notify.TextSize = 18
Notify.Text = "‚úÖ ESP Loaded Successfully!"
Notify.Parent = ScreenGui
task.wait(2.5)
Notify:Destroy()
